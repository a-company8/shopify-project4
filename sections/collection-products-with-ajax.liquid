<div class="collection-products-section">
  {% assign collection_handle = section.settings.collection %}
  {% assign collection = collections[collection_handle] %}
  
  {% if collection.products.size > 0 %}
    <!-- Custom Collection Section -->
    <div class="custom-collection-section" 
    data-collection-handle="{{ section.settings.collection }}" 
    data-products-per-row="{{ section.settings.products_per_row }}">
 <div class="products-grid" style="grid-template-columns: repeat({{ section.settings.products_per_row }}, 1fr);">
   {% for product in collection.products limit: section.settings.products_per_row %}
     <div class="product-card" data-product-id="{{ product.id }}">
       <a href="{{ product.url }}">
         <img src="{{ product.featured_image | img_url: 'medium' }}" alt="{{ product.title }}">
         <h3>{{ product.title }}</h3>
         <p class="product-price">{{ product.price | money }}</p>
       </a>
       <button class="add-to-cart-btn" data-product-id="{{ product.id }}" onclick="myFunction('{{product.title | handle}}')" >Add to Cart</button>
     </div>
   {% endfor %}
 </div>
 <button id="load-more-btn">Load More</button>
</div>




{% schema %}
{
  "name": "Collection with AJAX",
  "settings": [
    {
      "type": "collection",
      "id": "collection",
      "label": "Select Collection",
      "default": "frontpage"
    },
    {
      "type": "range",
      "id": "products_per_row",
      "label": "Products per row",
      "default": 4,
      "min": 2,
      "max": 6
    }
  ],
  "presets": [
    {
      "name": "Collection with AJAX",
      "category": "Products"
    }
  ]
}
{% endschema %}
